<!--
author: jimmy
head:
date: 2018-02-14
title: linux常用命令学习
tags: tips
images: blog/img/1.jpg
category: linux
status: publish
summary: linux常用命令
-->
## linux常用命令学习
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=0} -->
<!-- code_chunk_output -->

* [linux常用命令学习](#linux常用命令学习)
	* [1 ls命令](#1-ls命令)
		* [1.1 命令格式](#11-命令格式)
		* [1.2 参数描述](#12-参数描述)
	* [2 cd 命令](#2-cd-命令)
		* [2.1 命令格式](#21-命令格式)
		* [2.2 参数描述](#22-参数描述)
	* [3 pwd 命令](#3-pwd-命令)
		* [3.1 命令格式](#31-命令格式)
		* [3.2 参数描述](#32-参数描述)
	* [4 mkdir](#4-mkdir)
		* [4.1 命令格式](#41-命令格式)
		* [4.2 参数描述](#42-参数描述)
	* [5 rm](#5-rm)
		* [5.1 命令格式](#51-命令格式)
		* [5.2 参数描述](#52-参数描述)
	* [6 rmdir](#6-rmdir)
		* [6.1 命令格式](#61-命令格式)
		* [6.2 参数描述](#62-参数描述)
	* [7 mv](#7-mv)
		* [7.1 命令格式](#71-命令格式)
		* [7.2 参数描述](#72-参数描述)
	* [8 cp](#8-cp)
		* [8.1 命令格式](#81-命令格式)
		* [8.2 参数描述](#82-参数描述)
	* [9 touch](#9-touch)
		* [9.1 命令格式](#91-命令格式)
		* [9.2 参数描述](#92-参数描述)
	* [10 cat](#10-cat)
		* [10.1 命令格式](#101-命令格式)
		* [10.2 参数描述](#102-参数描述)
	* [11 nl](#11-nl)
		* [11.1 命令格式](#111-命令格式)
		* [11.2 参数描述](#112-参数描述)
	* [12 more](#12-more)
		* [12.1 命令格式](#121-命令格式)
		* [12.2 参数描述](#122-参数描述)
		* [12.3 操作命令](#123-操作命令)
	* [13 less](#13-less)
		* [13.1 命令格式](#131-命令格式)
		* [13.2 参数描述](#132-参数描述)
		* [13.3 操作命令](#133-操作命令)
	* [14 head](#14-head)
		* [14.1 命令格式](#141-命令格式)
		* [14.2 参数描述](#142-参数描述)
	* [15 tail](#15-tail)
		* [15.1 命令格式](#151-命令格式)
		* [15.2 参数描述](#152-参数描述)
	* [16 which](#16-which)
		* [16.1 命令格式](#161-命令格式)
		* [16.2 命令参数](#162-命令参数)
	* [17 whereis](#17-whereis)
		* [17.1 命令格式](#171-命令格式)
		* [17.2 命令参数](#172-命令参数)
	* [18 locate](#18-locate)
		* [18.1 命令格式](#181-命令格式)
		* [18.2 命令参数](#182-命令参数)
	* [19 find](#19-find)
		* [19.1 命令格式](#191-命令格式)
		* [19.2 命令参数](#192-命令参数)
		* [19.3 命令选项](#193-命令选项)
		* [19.4 命令操作详解](#194-命令操作详解)

<!-- /code_chunk_output -->
### 1 ls命令
ls命令是linux下最常用的命令。ls命令就是list的缩写，缺省下ls用来打印出当前目录的清单。如果ls指定其他目录，那么就会显示指定目录里的文件及文件夹清单。 通过ls 命令不仅可以查看linux文件夹包含的文件而且可以查看文件权限(包括目录、文件夹、文件权限)查看目录信息等等。
#### 1.1 命令格式
ls [选项] [目录名]
#### 1.2 参数描述
```
-a, –all 列出目录下的所有文件，包括以 . 开头的隐含文件
-A, 同-a，但不列出“.”(表示当前目录)和“..”(表示当前目录的父目录)。

-b, --escape               把文件名中不可输出的字符用反斜杠加字符编号的形式列出。
    --block-size=SIZE      块以指定<大小>的字节为单位
-B, 不列出任何以 ~ 字符结束的隐含条目

-c  配合 -lt：根据 ctime 排序及显示 ctime (文件状态最后更改的时间)
    配合 -l：显示 ctime 但根据名称排序
    否则：根据 ctime 排序
-C 多列显示输出结果(默认选项与 -l 相反)
    –color[=WHEN] 控制是否使用色彩分辨文件。WHEN 可以是’never’、’always’或’auto’其中之一

-d, –directory 将目录象文件一样显示，而不是显示其下的文件。
-D, –dired 产生适合 Emacs 的 dired 模式使用的结果

-f 对输出的文件不进行排序，与 -aU 相同，与-ls 相反

-g 类似 -l,但不列出所有者

-G, –no-group 不列出任何有关组的信息

-h, –human-readable 以容易理解的格式列出文件大小 (例如 1K 234M 2G)

–si 类似 -h,但文件大小取 1000 的次方而不是 1024

-H, --dereference-command-line 使用命令列中的符号链接指示的真正目的地
    --indicator-style=方式 指定在每个项目名称后加上指示符号<方式>：none (默认)，classify (-F)，file-type (-p)

-i, –inode 印出每个文件的 inode 号 (inode 索引节点,是存储文件元信息的区域)

-I, --ignore=样式 不印出任何符合 shell 万用字符<样式>的项目

-k 即 --block-size=1K,以 k 字节的形式表示文件的大小。

-l 除了文件名之外，还将文件的权限、所有者、文件大小等信息详细列出来。

-L, –dereference 当显示符号链接的文件信息时，显示符号链接所指示的对象而并非符号链接本身的信息

-m 所有项目以逗号分隔，并填满整行行宽

-o 类似 -l,显示文件的除组信息外的详细信息。

-r, --reverse 依相反次序排列

-R, --recursive 同时列出所有子目录层

-s, --size 以块大小为单位列出所有文件的大小

-S 根据文件大小排序
    --sort=WORD 以下是可选用的 WORD 和它们代表的相应选项：
      extension -X status -c
      none -U time -t
      size -S atime -u
      time -t access -u
      version -v use -u

-t 以文件修改时间排序

-u 配合 -lt:显示访问时间而且依访问时间排序
    配合 -l:显示访问时间但根据名称排序
    否则：根据访问时间排序

-U 不进行排序;依文件系统原有的次序列出项目

-v 根据版本进行排序

-w, –width=COLS 自行指定屏幕宽度而不使用目前的数值

-x 逐行列出项目而不是逐栏列出

-X 根据扩展名排序

-1 每行只列出一个文件

–help 显示此帮助信息并离开

–version 显示版本信息并离开
```
### 2 cd 命令
切换当前目录到目标目录
#### 2.1 命令格式
cd [目录名]
#### 2.2 参数描述
```
cd / #进入系统目录
cd   #进入用户根目录
cd ../ #进入上级目录
cd - #返回进入该目录前的目录
cd !$ #把上个命令的参数作为cd参数使用
```

### 3 pwd 命令
查看当前工作目录完整路径
#### 3.1 命令格式
pwd [选项]
#### 3.2 参数描述

```shell
-L 目录连接链接时，输出连接路径
-P 输出物理路径
```

### 4 mkdir
在指定位置创建以 DirName(指定的文件名)命名的文件夹或目录。
#### 4.1 命令格式
mkdir [选项] 目录...
#### 4.2 参数描述

```
-m, --mode=模式，设定权限<模式> (类似 chmod)，eg:777
-p, --parents  可以是一个路径名称。此时若路径中的某些目录尚不存在,加上此选项后,系统将自动建立好那些尚不存在的目录,即一次可以建立多个目录;
-v, --verbose  每次创建新目录都显示信息
    --help   显示此帮助信息并退出
    --version  输出版本信息并退出
```

### 5 rm
删除文件或目录
#### 5.1 命令格式
rm [选项] 文件...
#### 5.2 参数描述
```
-f, --force    忽略不存在的文件，从不给出提示。
-i, --interactive 进行交互式删除
-r, -R, --recursive   指示rm将参数中列出的全部目录和子目录均递归地删除。
-v, --verbose    详细显示进行的步骤
    --help     显示此帮助信息并退出
    --version  输出版本信息并退出
```

### 6 rmdir
从一个目录中删除一个或多个目录，不能删除非空目录
#### 6.1 命令格式
rmdir [选项]... 目录...
#### 6.2 参数描述
```
- p 递归删除目录dirname，当子目录删除后其父目录为空时，也一同被删除。如果整个路径被删除或者由于某种原因保留部分路径，则系统在标准输出上显示相应的信息。
-v, --verbose  显示指令执行过程
```

### 7 mv
移动文件或将文件改名
#### 7.1 命令格式
mv [选项] 源文件或目录 目标文件或目录
#### 7.2 参数描述
```
-b ：若需覆盖文件，则覆盖前先行备份。
-f ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；
-i ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！
-u ：若目标文件已经存在，且 source 比较新，才会更新(update)
-t  ： --target-directory=DIRECTORY 即指定mv的目标目录，该选项适用于移动多个源文件到一个目录的情况，此时目标目录在前，源文件在后。
```

### 8 cp
复制文件
#### 8.1 命令格式
cp [选项]... [-T] 源 目的
或：cp [选项]... 源... 目录
或：cp [选项]... -t 目录 源...
#### 8.2 参数描述
```
-a, --archive    等于-dR --preserve=all
    --backup[=CONTROL    为每个已存在的目标文件创建备份
-b                类似--backup 但不接受参数
   --copy-contents        在递归处理是复制特殊文件内容
-d                等于--no-dereference --preserve=links
-f, --force        如果目标文件无法打开则将其移除并重试(当 -n 选项
                    存在时则不需再选此项)
-i, --interactive        覆盖前询问(使前面的 -n 选项失效)
-H                跟随源文件中的命令行符号链接
-l, --link            链接文件而不复制
-L, --dereference   总是跟随符号链接
-n, --no-clobber   不要覆盖已存在的文件(使前面的 -i 选项失效)
-P, --no-dereference   不跟随源文件中的符号链接
-p                等于--preserve=模式,所有权,时间戳
    --preserve[=属性列表   保持指定的属性(默认：模式,所有权,时间戳)，如果
               可能保持附加属性：环境、链接、xattr 等
-R, -r, --recursive  复制目录及目录内的所有项目
```

### 9 touch
用来修改文件时间戳，或者新建一个不存在的文件。
#### 9.1 命令格式
touch [选项]... 文件...
#### 9.2 参数描述
```
-a   或--time=atime或--time=access或--time=use 　只更改存取时间。
-c   或--no-create 　不建立任何文档。
-d 　使用指定的日期时间，而非现在的时间。
-f 　此参数将忽略不予处理，仅负责解决BSD版本touch指令的兼容性问题。
-m   或--time=mtime或--time=modify 　只更改变动时间。
-r 　把指定文档或目录的日期时间，统统设成和参考文档或目录的日期时间相同。
-t 　使用指定的日期时间，而非现在的时间。
```

### 10 cat
连接文件或标准输入并打印
>tac 是将 cat 反写过来，所以他的功能就跟 cat 相反， cat 是由第一行到最后一行连续显示在萤幕上，而 tac 则是由最后一行到第一行反向在萤幕上显示出来！

#### 10.1 命令格式
cat [选项] [文件]...
#### 10.2 参数描述
```
-A, --show-all           等价于 -vET
-b, --number-nonblank    对非空输出行编号
-e                       等价于 -vE
-E, --show-ends          在每行结束处显示 $
-n, --number     对输出的所有行编号,由1开始对所有输出的行数编号
-s, --squeeze-blank  有连续两行以上的空白行，就代换为一行的空白行
-t                       与 -vT 等价
-T, --show-tabs          将跳格字符显示为 ^I
-u                       (被忽略)
-v, --show-nonprinting   使用 ^ 和 M- 引用，除了 LFD 和 TAB 之外
```

### 11 nl
计算显示带行号输出内容，默认结果与cat -b 类似，nl能对行号进行更多处理，例如：自动补齐0，位数设置
#### 11.1 命令格式
nl [选项]... [文件]...
#### 11.2 参数描述
```
-b  ：指定行号指定的方式，主要有两种：
-b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)；
-b t ：如果有空行，空的那一行不要列出行号(默认值)；
-n  ：列出行号表示的方法，主要有三种：
-n ln ：行号在萤幕的最左方显示；
-n rn ：行号在自己栏位的最右方显示，且不加 0 ；
-n rz ：行号在自己栏位的最右方显示，且加 0 ；
-w  ：行号栏位的占用的位数。
-p 在逻辑定界符处不重新开始计算
```

### 12 more
显示文件，可以按页显示，more在启动时加载整个文件。
#### 12.1 命令格式
more [-dlfpcsu ] [-num ] [+/ pattern] [+ linenum] [file ... ]
#### 12.2 参数描述
```
+n      从笫n行开始显示
-n       定义屏幕大小为n行
+/pattern 在每个档案显示前搜寻该字串（pattern），然后从该字串前两行之后开始显示  
-c       从顶部清屏，然后显示
-d       提示“Press space to continue，’q’ to quit（按空格键继续，按q键退出）”，禁用响铃功能
-l        忽略Ctrl+l（换页）字符
-p       通过清除窗口而不是滚屏来对文件进行换页，与-c选项相似
-s       把连续的多个空行显示为一行
-u       把文件内容中的下画线去掉
```
#### 12.3 操作命令
```
Enter    向下n行，需要定义。默认为1行
Ctrl+F   向下滚动一屏
空格键  向下滚动一屏
Ctrl+B  返回上一屏
=       输出当前行的行号
：f     输出文件名和当前行的行号
V      调用vi编辑器
!命令   调用Shell，并执行命令
q       退出more
```

### 13 less
less 与 more 类似，但使用 less 可以随意浏览文件，而 more 仅能向前移动，却不能向后移动，而且 less 在查看之前不会加载整个文件。
#### 13.1 命令格式
less [参数]  文件
#### 13.2 参数描述
```
-b <缓冲区大小> 设置缓冲区的大小
-e  当文件显示结束后，自动离开
-f  强迫打开特殊文件，例如外围设备代号、目录和二进制文件
-g  只标志最后搜索的关键词
-i  忽略搜索时的大小写
-m  显示类似more命令的百分比
-N  显示每行的行号
-o <文件名> 将less 输出的内容在指定文件中保存起来
-Q  不使用警告音
-s  显示连续空行为一行
-S  行过长时间将超出部分舍弃
-x <数字> 将“tab”键显示为规定的数字空格
```
#### 13.3 操作命令
```
/字符串：向下搜索“字符串”的功能
?字符串：向上搜索“字符串”的功能
n：重复前一个搜索（与 / 或 ? 有关）
N：反向重复前一个搜索（与 / 或 ? 有关）
b  向后翻一页
d  向后翻半页
h  显示帮助界面
Q  退出less 命令
u  向前滚动半页
y  向前滚动一行
空格键 滚动一行
回车键 滚动一页
[pagedown]： 向下翻动一页
[pageup]：   向上翻动一页
j - 向前移动一行
k - 向后移动一行
G - 移动到最后一行
g - 移动到第一行
q / ZZ - 退出 less 命令
```

### 14 head
显示文件开头至标准输出
#### 14.1 命令格式
head [参数]... [文件]...
#### 14.2 参数描述
```
-q 隐藏文件名
-v 显示文件名
-c<字节> 显示字节数
-n<行数> 显示的行数
```

### 15 tail
显示文件结尾至标准输出
#### 15.1 命令格式
tail [必要参数] [选择参数] [文件]   
#### 15.2 参数描述
```
-f 循环读取
-q 不显示处理信息
-v 显示详细的处理信息
-c<数目> 显示的字节数
-n<行数> 显示行数
--pid=PID 与-f合用,表示在进程ID,PID死掉之后结束.
-q, --quiet, --silent 从不输出给出文件名的首部
-s, --sleep-interval=S 与-f合用,表示在每次反复的间隔休眠S秒
```

### 16 which
which命令的作用是，在PATH变量指定的路径中，搜索某个系统命令的位置
#### 16.1 命令格式
which 可执行文件名称
#### 16.2 命令参数
```
-n 　指定文件名长度，指定的长度必须大于或等于所有文件中最长的文件名。
-p 　与-n参数相同，但此处的包括了文件的路径。
-w 　指定输出时栏位的宽度。
-V 　显示版本信息
```

### 17 whereis
用于程序名的搜索，与find相比，whereis查找的速度非常快，这是因为linux系统会将系统内的所有文件都记录在一个数据库文件中，当使用whereis和下面即将介绍的locate时，会从数据库中查找数据，而不是像find命令那样，通 过遍历硬盘来查找，效率自然会很高。
但是该数据库文件并不是实时更新，默认情况下时一星期更新一次，因此，我们在用whereis和locate 查找文件时，有时会找到已经被删除的数据，或者刚刚建立文件，却无法查找到，原因就是因为数据库文件没有被更新。
#### 17.1 命令格式
whereis [-bmsu] [BMS 目录名 -f ] 文件名
#### 17.2 命令参数
```
-b   定位可执行文件。
-m   定位帮助文件。
-s   定位源代码文件。
-u   搜索默认路径下除可执行文件、源代码文件、帮助文件以外的其它文件。
-B   指定搜索可执行文件的路径。
-M   指定搜索帮助文件的路径。
-S   指定搜索源代码文件的路径。
```

### 18 locate
locate(非实时查找) 让使用者可以很快速的搜寻档案系统内是否有指定的档案。
是通过update程序将硬盘中的所有档案和目录资料先建立一个索引数据库，在 执行loacte时直接找该索引，查询速度会较快
#### 18.1 命令格式
locate [选择参数] [样式]
#### 18.2 命令参数
```
-c   只输出查找到的个数
-e   将排除在寻找的范围之外。
-i   忽视大小写
-f   将特定的档案系统排除在外，例如我们没有到理要把 proc 档案系统中的档案	放在资料库中。
-q  安静模式，不会显示任何错误讯息。
-n -l [个数] 至多显示 n个输出。
-r 使用正规运算式 做寻找的条件。
-o 指定资料库存的名称。
-d 指定资料库的路径
-h 显示辅助讯息
-V 显示程式的版本讯息
```

### 19 find
find命令在目录结构中搜索文件，并执行指定的操作。find提供非常强大的搜索功能。
#### 19.1 命令格式
find [-H] [-L] [-P] [-Olevel] [-D help|tree|search|stat|rates|opt|exec|time] [path...] [expression]

常规使用：
find path -options [-print -exec -ok ...]

#### 19.2 命令参数
path：查找的目录路径
-options 指定find选项（-name等等）
-print： find将匹配的文件输出到标准输出。
-exec： find对匹配到的文件执行 该参数后的命令。
-ok： 与exec类似，在执行每条命令前让用户确认

#### 19.3 命令选项
+ -name
按照某种文件名模式来匹配文件
```
# 在当前目录及子目录查找文件名以大写字母开头
find . -name "[A-Z]"
```
+ -perm
按文件权限模式来查找文件
```
# 在当前目录及子目录查找权限为755的文件
find . -perm 755
```
+ -prune
忽视某个目录
```
# 在当前目录查找，忽视test目录
find . -path "test" -prune
# 忽视多个目录 -o 表示 ||
find . \( -path test/test4 -o -path test/test3 \) -prune
```
+ -user和-nouser选项：
按文件属主查询
```
# 在当前目录查找属主为test的文件
find . -user test
```
+ -group和-nogroup选项：
按文件组查询
```
# 在当前目录查找组为test的文件
find . -group test
```
+ -mtime,-atime或-ctime
按修改时间或访问时间等查询
```
-mtime -n +n ： 按照文件的更改时间来查找文件， - n表示文件更改时间距现在n天以内，+ n表示文件更改时间距现在n天以前。
find / -mtime -5
```
+ -newer
查找更改时间比某个文件新但比另一个文件旧的所有文件
```
newest_file_name ! oldest_file_name  
```
+ -type
```
b - 块设备文件。
d - 目录。
c - 字符设备文件。
p - 管道文件。
l - 符号链接文件。
f - 普通文件。

find / -type d -print
```
+ -size
按照文件长度来查找文件
```
# 在当前目录下查找文件长度大于1 M字节的文件  
find . -size +1000000c -print
```
+ -depth
先匹配所有的文件，再在子目录中查找
+ -mount
在查找文件时不跨越文件系统mount点

#### 19.4 命令操作详解
+ exec
exec {} \;
-exec  参数后面跟的是command命令，它的终止是以;为结束标志的，所以这句命令后面的分号是不可缺少的，考虑到各个系统中分号会有不同的意义，所以前面加反斜杠,{}花括号代表前面find查找出来的文件名。
+ xargs
使用exec处理查询结果时，find会将查询到的所有文件一起传给exec，但有些命令对入参有限制，会出现问题。
find命令把匹配到的文件传递给xargs命令，而xargs命令每次只获取一部分文件而不是全部，不像-exec选项那样。这样它可以先处理最先获取的一部分文件，然后是下一批，并如此继续下去。
```
find . -name "*.log" | xargs -i mv {} test4
```
